var touch=touch||{};!function(e,t){function n(e){if(C){for(var t=[],n=null,r=0,o=e.touches.length;o>r;r++)n=e.touches[r],t.push({x:n.pageX,y:n.pageY});return t}return[{x:e.pageX,y:e.pageY}]}function r(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function o(e){return e.touches?e.touches.length:1}function i(e,t){if(e.length>=2&&t.length>=2){var n=r(e[1],e[0]),o=r(t[1],t[0]);return o/n}return 1}function a(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function s(e,t){var n=Math.atan(-1*(t.y-e.y)/(t.x-e.x))*(180/Math.PI);return 0>n?n+180:n}function u(e){var t={up:-45>e&&e>-135,down:e>=45&&135>e,left:e>=135||-135>=e,right:e>=-45&&45>=e};for(var n in t)if(t[n])return n;return null}function c(e){for(var t=0,n=0;e.offsetParent;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{left:t,top:n}}function f(){A=x=R=null,U=H=b=D=!1,L=!1,_={},k=!1}function l(e){return"touchmove"===e.type||"mousemove"===e.type}function p(e){return"touchend"===e.type||"mouseup"===e.type||"touchcancel"===e.type}function v(){var t=C?"touchstart touchmove touchend touchcancel":"mouseup mousedown mousemove mouseout";Q(e,"DOMContentLoaded",function(){var n=e.body;Q(n,t,Y)})}var g=function(){var e=window.navigator,t=e.userAgent,n=t.match(/(Android)[\s\/]+([\d\.]+)/),r=t.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),o=t.match(/(Windows\s+Phone)\s([\d\.]+)/),i=/WebKit\/[\d.]+/i.test(t),a=r?e.standalone?i:/Safari/i.test(t)&&!/CriOS/i.test(t)&&!/MQQBrowser/i.test(t):!1,s={};return n&&(s.android=!0,s.version=n[2]),r&&(s.ios=!0,s.version=r[2].replace(/_/g,"."),s.ios7=/^7/.test(s.version),"iPad"===r[1]?s.ipad=!0:"iPhone"===r[1]?(s.iphone=!0,s.iphone5=568==window.screen.height):"iPod"===r[1]&&(s.ipod=!0)),o&&(s.wp=!0,s.version=o[2],s.wp8=/^8/.test(s.version)),i&&(s.webkit=!0),a&&(s.safari=!0),s}(),h={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseout"},d=(document.getElementById("logger"),{getType:function(e){return Object.prototype.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},getSelector:function(e){if(e.id)return"#"+e.id;if(e.className){var t=e.className.split(/\s+/);return"."+t.join(".")}return e.tagName.toLowerCase()},matchSelector:function(e,t){return e.webkitMatchesSelector(t)},getEventListeners:function(e){return e.listeners},getPCevts:function(e){return h[e]||e},forceReflow:function(){var e=document.getElementById("domTreeOp");e||(e=document.createElement("div"),e.id="domTreeOp",document.body.appendChild(e));var t=e.parentNode,n=e.nextSibling;t.removeChild(e),t.insertBefore(e,n)}}),m=0,E=[],T=function(e,t,n){var r={bubbles:!0,cancelable:!0,detail:n||{}},o=new CustomEvent(t,r);e&&e.dispatchEvent(o)},y=function(e,t,n){e.listeners=e.listeners||{},e.listeners[t]?e.listeners[t].push(n):e.listeners[t]=[n];var r=function(e){g.ios7&&d.forceReflow(),e.originEvent=e,e.startRotate=function(){k=!0};for(var t in e.detail)e[t]=e.detail[t];n.call(e.target,e)};n.proxy=n.proxy||{},n.proxy[t]?n.proxy[t].push(m++):n.proxy[t]=[m++],E.push(r),e.addEventListener&&e.addEventListener(t,r,!1)},w=function(e,t,n){if(n){var r=n.proxy[t];r&&r.length&&r.forEach(function(n){e.removeEventListener&&e.removeEventListener(t,E[n],!1)})}else{var o=e.listeners[t];o&&o.length&&o.forEach(function(n){e.removeEventListener(t,n,!1)})}},I=function(e,t,n,r){var o=function(t){var o;t.originEvent=t,t.startRotate=function(){k=!0};for(var i in t.detail)t[i]=t.detail[i];var a=d.getSelector(e)+" "+n,s=d.matchSelector(t.target,a),u=d.matchSelector(t.target,a+" "+t.target.nodeName);if(!s&&u){g.ios7&&d.forceReflow();for(var o=t.target;!d.matchSelector(o,a);)o=o.parentNode;r.call(o,t)}else g.ios7&&d.forceReflow(),(s||u)&&r.call(t.target,t)};r.proxy=r.proxy||{},r.proxy[t]?r.proxy[t].push(m++):r.proxy[t]=[m++],E.push(o),e.listeners=e.listeners||{},e.listeners[t]?e.listeners[t].push(o):e.listeners[t]=[o],e.addEventListener&&e.addEventListener(t,o,!1)},P=function(e,t,n,r){if(r){var o=r.proxy[t];o.length&&o.forEach(function(n){e.removeEventListener&&e.removeEventListener(t,E[n],!1)})}else{var i=e.listeners[t];i.forEach(function(n){e.removeEventListener(t,n,!1)})}},S={tap:!0,doubleTap:!0,tapMaxDistance:10,hold:!0,holdTime:650,maxDoubleTapInterval:300,swipe:!0,swipeTime:300,swipeMinDistance:18,swipeFactor:5,drag:!0,pinch:!0,minScaleRate:0,minRotationAngle:0},C="ontouchstart"in window,O={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",CLICK:"click",PINCH_START:"pinchstart",PINCH_END:"pinchend",PINCH:"pinch",PINCH_IN:"pinchin",PINCH_OUT:"pinchout",ROTATION_LEFT:"rotateleft",ROTATION_RIGHT:"rotateright",ROTATION:"rotate",SWIPE_START:"swipestart",SWIPING:"swiping",SWIPE_END:"swipeend",SWIPE_LEFT:"swipeleft",SWIPE_RIGHT:"swiperight",SWIPE_UP:"swipeup",SWIPE_DOWN:"swipedown",SWIPE:"swipe",DRAG:"drag",HOLD:"hold",TAP:"tap",DOUBLE_TAP:"doubletap"},_={start:null,move:null,end:null},N=0,A=null,x=null,R=null,b=!1,D=!1,L=!1,W={},H=!1,M=null,U=!1,F=1,k=!1,G=[],B=0,j=0,q=0,K=null,X={_getAngleDiff:function(e){for(var t=parseInt(B-s(e[0],e[1]),10),n=0;Math.abs(t-j)>90&&n++<50;)0>j?t-=180:t+=180;return j=parseInt(t,10)},pinch:function(e){var t=e.target;if(S.pinch){if(!H)return;if(o(e)<2&&!p(e))return;var n=i(_.start,_.move),r=this._getAngleDiff(_.move),a={type:"",originEvent:e,scale:n,rotation:r,direction:r>0?"right":"left",fingersCount:o(e)};if(D?l(e)?a.fingerStatus="move":p(e)&&(a.fingerStatus="end",T(t,O.PINCH_END,a),f()):(D=!0,a.fingerStatus="start",T(t,O.PINCH_START,a)),T(t,O.PINCH,a),Math.abs(1-n)>S.minScaleRate){var s=_utils.deepCopy(a),u=1e-11;n>F?(F=n-u,T(t,O.PINCH_OUT,s,!1)):F>n&&(F=n+u,T(t,O.PINCH_IN,s,!1)),p(e)&&(F=1)}if(Math.abs(r)>S.minRotationAngle){var c,v=_utils.deepCopy(a);c=r>0?O.ROTATION_RIGHT:O.ROTATION_LEFT,T(t,c,v,!1),T(t,O.ROTATION,a)}}},rotateSingleFinger:function(e){var t=e.target;if(k&&o(e)<2){if(!_.move)return;if(G.length<2){var n=c(t);G=[{x:n.left+t.offsetWidth/2,y:n.top+t.offsetHeight/2},_.move[0]],B=parseInt(s(G[0],G[1]),10)}var r=[G[0],_.move[0]],i=this._getAngleDiff(r),a={type:"",originEvent:e,rotation:i,direction:i>0?"right":"left",fingersCount:o(e)};l(e)?a.fingerStatus="move":(p(e)||"mouseout"===e.type)&&(a.fingerStatus="end",T(t,O.PINCH_END,a),f()),eventType=i>0?O.ROTATION_RIGHT:O.ROTATION_LEFT,T(t,eventType,a),T(t,O.ROTATION,a)}},swipe:function(e){var t=e.target;if(H&&_.move&&!(o(e)>1)){var n=Date.now(),i=n-N,s=r(_.start[0],_.move[0]),c={x:_.move[0].x-W.left,y:_.move[0].y-W.top},f=a(_.start[0],_.move[0]),v=u(f),g=i/1e3,h=10*(10-S.swipeFactor)*g*g,d={type:O.SWIPE,originEvent:e,position:c,direction:v,distance:s,distanceX:_.move[0].x-_.start[0].x,distanceY:_.move[0].y-_.start[0].y,angle:f,duration:i,fingersCount:o(e),factor:h};if(S.swipe){var m=function(){var e=O;switch(v){case"up":T(t,e.SWIPE_UP,d);break;case"down":T(t,e.SWIPE_DOWN,d);break;case"left":T(t,e.SWIPE_LEFT,d);break;case"right":T(t,e.SWIPE_RIGHT,d)}};b?l(e)?(d.fingerStatus=d.swipe="move",T(t,O.SWIPING,d),i>S.swipeTime&&i<S.swipeTime+50&&s>S.swipeMinDistance&&(m(),T(t,O.SWIPE,d,!1))):(p(e)||"mouseout"===e.type)&&(d.fingerStatus=d.swipe="end",T(t,O.SWIPE_END,d),S.swipeTime>i&&s>S.swipeMinDistance&&(m(),T(t,O.SWIPE,d,!1))):(d.fingerStatus=d.swipe="start",b=!0,T(t,O.SWIPE_START,d))}S.drag&&(L?l(e)?d.fingerStatus=d.swipe="move":p(e)&&(d.fingerStatus=d.swipe="end"):(d.fingerStatus=d.swipe="start",L=!0),T(t,O.DRAG,d))}},tap:function(e){var t=e.target;if(S.tap){var n=Date.now(),i=n-N,a=r(_.start[0],_.move?_.move[0]:_.start[0]);clearTimeout(M);var s=function(){if(K&&S.doubleTap&&N-q<S.maxDoubleTapInterval){var e=r(K,_.start[0]);if(16>e)return!0}return!1}();if(s)return void T(t,O.DOUBLE_TAP,{type:O.DOUBLE_TAP,originEvent:e,position:_.start[0]});if(S.tapMaxDistance<a)return;S.holdTime>i&&o(e)<=1&&(U=!0,q=n,K=_.start[0],T(t,O.TAP,{type:O.TAP,originEvent:e,fingersCount:o(e),position:_.start[0]}),T(t,O.CLICK,{type:O.CLICK,originEvent:e,fingersCount:o(e),position:_.start[0]}))}},hold:function(e){var t=e.target;S.hold&&(clearTimeout(M),M=setTimeout(function(){if(_.start){var n=r(_.start[0],_.move?_.move[0]:_.start[0]);S.tapMaxDistance<n||U||T(t,"hold",{type:"hold",originEvent:e,fingersCount:o(e),position:_.start[0]})}},S.holdTime))}},Y=function(e){var t=e.target;switch(e.type){case"touchstart":case"mousedown":G=[],counter=0,H=!0,(!_.start||_.start.length<2)&&(_.start=n(e)),o(e)>=2&&(B=parseInt(s(_.start[0],_.start[1]),10)),N=Date.now(),A=e,W={};var r=t.getBoundingClientRect(),i=document.documentElement;W={top:r.top+(window.pageYOffset||i.scrollTop)-(i.clientTop||0),left:r.left+(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0)},X.hold(e);break;case"touchmove":case"mousemove":if(!H||!_.start)return;_.move=n(e),o(e)>=2?X.pinch(e):k?X.rotateSingleFinger(e):X.swipe(e);break;case"touchend":case"touchcancel":case"mouseup":case"mouseout":if(!H)return;R=e,D?X.pinch(e):k?X.rotateSingleFinger(e):b?X.swipe(e):X.tap(e),f(),B=0,j=0,e.touches&&1===e.touches.length&&(H=!0,k=!0)}},Q=function(){var t=arguments;if(t.length<2||t>4)return console.error("unexpected arguments!");var n="string"===d.getType(t[0])?e.querySelectorAll(t[0]):t[0];if(n=n.length?Array.prototype.slice.call(n):[n],3===t.length&&"string"===d.getType(t[1])){var r=t[1].split(" "),o=t[2];return void r.forEach(function(e){C||(e=d.getPCevts(e)),n.forEach(function(t){y(t,e,o)})})}if(3!==t.length||"object"!==d.getType(t[1]))if(2!==t.length||"object"!==d.getType(t[1])){if(4===t.length&&"object"===d.getType(t[2])){var r=t[1].split(" "),o=t[3];return void r.forEach(function(e){C||(e=d.getPCevts(e)),n.forEach(function(t){y(t,e,o)})})}if(4===t.length){var i=n[0],r=t[1].split(" "),a=t[2],o=t[3];return void r.forEach(function(e){C||(e=d.getPCevts(e)),I(i,e,a,o)})}}else{var s=t[1];for(var u in s)C||(u=d.getPCevts(u)),n.forEach(function(e){y(e,u,s[u])})}else{var s=t[1],a=t[2];for(var u in s)C||(u=d.getPCevts(u)),n.forEach(function(e){I(e,u,a,s[u])})}},V=function(){var t=arguments;if(t.length<1||t.length>4)return console.error("unexpected arguments!");var n="string"===d.getType(t[0])?e.querySelectorAll(t[0]):t[0];if(n=n.length?Array.prototype.slice.call(n):[n],1===t.length||2===t.length)return void n.forEach(function(e){var n=t[1]?t[1].split(" "):Object.keys(e.listeners);n.length&&n.forEach(function(t){C||(t=d.getPCevts(t)),w(e,t),P(e,t)})});if(3===t.length&&"function"===d.getType(t[2])){var r=t[2];return void n.forEach(function(e){var n=t[1].split(" ");n.forEach(function(t){C||(t=d.getPCevts(t)),w(e,t,r)})})}if(3===t.length&&"string"===d.getType(t[2])){var o=t[2];return void n.forEach(function(e){var n=t[1].split(" ");n.forEach(function(t){C||(t=d.getPCevts(t)),P(e,t,o)})})}if(4===t.length){var r=t[3];return void n.forEach(function(e){var n=t[1].split(" ");n.forEach(function(t){C||(t=d.getPCevts(t)),P(e,t,o,r)})})}},z=function(t,n){var r=arguments;C||(n=d.getPCevts(n));var o="string"===d.getType(r[0])?e.querySelectorAll(r[0]):r[0];o=o.length?Array.prototype.call(o):[o],o.forEach(function(e){T(e,n)})};v(),t.on=Q,t.off=V,t.bind=Q,t.unbind=V,t.live=Q,t.die=V,t.config=S,t.trigger=z}(document,touch);