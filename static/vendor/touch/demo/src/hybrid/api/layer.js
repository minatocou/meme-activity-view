define(function(e){var r=e("./event"),n={},i=(window.devicePixelRatio||2,"0");return n.prepare=function(e,r){var e=e||uniqid(),n={};return["url","pullToRefresh"].forEach(function(e){void 0!==r[e]&&(n[e]=r[e])}),window.lc_bridge.prepareLayer(e,JSON.stringify(n)),e},n.resume=function(e,r){var i={fx:"slide",reverse:!1,duration:"normal"};r&&(r.fx&&(i.fx=r.fx),r.reverse&&(i.reverse=r.reverse),r.duration&&(i.duration=r.duration)),window.lc_bridge.resumeLayer(e,JSON.stringify(i)),n.fire("in",!1,e)},n.back=function(e){window.lc_bridge.backToPreviousLayer(),n.fire("out",!1,e||n.getCurrentId())},n.reload=function(e,r){return(1==arguments.length||0==arguments.length)&&(r=e,e=n.getCurrentId()),window.lc_bridge.layerLoadUrl(e,r),e},n.destroy=function(e){return e||(e=n.getCurrentId()),window.lc_bridge.destroyLayer(e),e},n.stopPullRefresh=function(e){return e||(e=n.getCurrentId()),window.lc_bridge.layerStopRefresh(e),e},n.isAvailable=function(e){return window.lc_bridge.isLayerAvailable(e)},n.getCurrentId=function(){return window.lc_bridge.currentLayerId()},n.layerStopLoading=function(e){return e=e||n.getCurrentId(),window.lc_bridge.layerStopLoading(e)},n.on=r.on,n.off=r.off,n.fire=function(e,r,t){r?"top"==r&&(r=i):r="";var o=n.getCurrentId(),d={};d.data=t||"",d.target=r,d.origin=o,window.lc_bridge.layerPostMessage(o,r,e,JSON.stringify(d))},n.postMessage=function(e,r){n.fire("message",r,e)},n});