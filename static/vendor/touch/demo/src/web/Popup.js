define(function(o){var e=(o("./blend"),o("./../common/lib")),t=o("./Dialog"),n=o("./Control"),i=function(o,e){return console.log("popup init"),n.call(this,{modal:o,removeOnClose:e}),this._init(),this};return e.inherits(i,t),i.prototype.removeOnClose=!0,i.prototype.type="popup",i.prototype._init=function(){if("string"==typeof this.modal&&this.modal.indexOf("<")>=0){var o=document.createElement("div");if(o.innerHTML=this.modal,!(o.childNodes.length>0))return!1;e=o.childNodes[0],this.removeOnClose&&e.classList.add("remove-on-close"),$("body").append(e)}var e=$(this.modal);return 0===e.length?!1:($(this.main).append(e).appendTo("body"),e.show(),this.open(),this)},i});