var touch=touch||{};!function(t,e){"use strict";function n(t){if(C){for(var e=[],n=null,r=0,o=t.touches.length;o>r;r++)n=t.touches[r],e.push({x:n.pageX,y:n.pageY});return e}return[{x:t.pageX,y:t.pageY}]}function r(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function o(t){return t.touches?t.touches.length:1}function i(t,e){if(t.length>=2&&e.length>=2){var n=r(t[1],t[0]),o=r(e[1],e[0]);return o/n}return 1}function a(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}function s(t,e){var n=Math.atan(-1*(e.y-t.y)/(e.x-t.x))*(180/Math.PI);return 0>n?n+180:n}function u(t){var e={up:-45>t&&t>-135,down:t>=45&&135>t,left:t>=135||-135>=t,right:t>=-45&&45>=t};for(var n in e)if(e[n])return n;return null}function c(t){for(var e=0,n=0;t.offsetParent;)e+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;return{left:e,top:n}}function f(){A=x=R=null,U=H=b=D=!1,L=!1,_={},k=!1}function l(t){return"touchmove"===t.type||"mousemove"===t.type}function p(t){return"touchend"===t.type||"mouseup"===t.type||"touchcancel"===t.type}function v(){var e=C?"touchstart touchmove touchend touchcancel":"mouseup mousedown mousemove mouseout";Q(t,"DOMContentLoaded",function(){var n=t.body;Q(n,e,Y)})}var h=function(){var t=window.navigator,e=t.userAgent,n=e.match(/(Android)[\s\/]+([\d\.]+)/),r=e.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),o=e.match(/(Windows\s+Phone)\s([\d\.]+)/),i=/WebKit\/[\d.]+/i.test(e),a=r?t.standalone?i:/Safari/i.test(e)&&!/CriOS/i.test(e)&&!/MQQBrowser/i.test(e):!1,s={};return n&&(s.android=!0,s.version=n[2]),r&&(s.ios=!0,s.version=r[2].replace(/_/g,"."),s.ios7=/^7/.test(s.version),"iPad"===r[1]?s.ipad=!0:"iPhone"===r[1]?(s.iphone=!0,s.iphone5=568==screen.height):"iPod"===r[1]&&(s.ipod=!0)),o&&(s.wp=!0,s.version=o[2],s.wp8=/^8/.test(s.version)),i&&(s.webkit=!0),a&&(s.safari=!0),s}(),g={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseout"},d={getType:function(t){return Object.prototype.toString.call(t).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},getSelector:function(t){if(t.id)return"#"+t.id;if(t.className){var e=t.className.split(/\s+/);return"."+e.join(".")}return t.tagName.toLowerCase()},matchSelector:function(t,e){return t.webkitMatchesSelector(e)},getEventListeners:function(t){return t.listeners},getPCevts:function(t){return g[t]||t},forceReflow:function(){var t=document.getElementById("domTreeOp");t||(t=document.createElement("div"),t.id="domTreeOp",document.body.appendChild(t));var e=t.parentNode,n=t.nextSibling;e.removeChild(t),e.insertBefore(t,n)}},m=0,E=[],T=function(t,e,n){n=n||{};var r,o={bubbles:!0,cancelable:!0,detail:n};"undefined"!=typeof CustomEvent?(r=new CustomEvent(e,o),t&&t.dispatchEvent(r)):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,n),t&&t.dispatchEvent(r))},y=function(t,e,n){t.listeners=t.listeners||{},t.listeners[e]?t.listeners[e].push(n):t.listeners[e]=[n];var r=function(t){h.ios7&&d.forceReflow(),t.originEvent=t,t.startRotate=function(){k=!0};for(var e in t.detail)t[e]=t.detail[e];n.call(t.target,t)};n.proxy=n.proxy||{},n.proxy[e]?n.proxy[e].push(m++):n.proxy[e]=[m++],E.push(r),t.addEventListener&&t.addEventListener(e,r,!1)},w=function(t,e,n){if(n){var r=n.proxy[e];r&&r.length&&r.forEach(function(n){t.removeEventListener&&t.removeEventListener(e,E[n],!1)})}else{var o=t.listeners[e];o&&o.length&&o.forEach(function(n){t.removeEventListener(e,n,!1)})}},P=function(t,e,n,r){var o=function(e){var o;e.originEvent=e,e.startRotate=function(){k=!0};for(var i in e.detail)e[i]=e.detail[i];var a=d.getSelector(t)+" "+n,s=d.matchSelector(e.target,a),u=d.matchSelector(e.target,a+" "+e.target.nodeName);if(!s&&u){for(h.ios7&&d.forceReflow(),o=e.target;!d.matchSelector(o,a);)o=o.parentNode;r.call(o,e)}else h.ios7&&d.forceReflow(),(s||u)&&r.call(e.target,e)};r.proxy=r.proxy||{},r.proxy[e]?r.proxy[e].push(m++):r.proxy[e]=[m++],E.push(o),t.listeners=t.listeners||{},t.listeners[e]?t.listeners[e].push(o):t.listeners[e]=[o],t.addEventListener&&t.addEventListener(e,o,!1)},I=function(t,e,n,r){if(r){var o=r.proxy[e];o.length&&o.forEach(function(n){t.removeEventListener&&t.removeEventListener(e,E[n],!1)})}else{var i=t.listeners[e];i.forEach(function(n){t.removeEventListener(e,n,!1)})}},S={tap:!0,doubleTap:!0,tapMaxDistance:10,hold:!0,holdTime:650,maxDoubleTapInterval:300,swipe:!0,swipeTime:300,swipeMinDistance:18,swipeFactor:5,drag:!0,pinch:!0,minScaleRate:0,minRotationAngle:0},C="ontouchstart"in window,O={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",CLICK:"click",PINCH_START:"pinchstart",PINCH_END:"pinchend",PINCH:"pinch",PINCH_IN:"pinchin",PINCH_OUT:"pinchout",ROTATION_LEFT:"rotateleft",ROTATION_RIGHT:"rotateright",ROTATION:"rotate",SWIPE_START:"swipestart",SWIPING:"swiping",SWIPE_END:"swipeend",SWIPE_LEFT:"swipeleft",SWIPE_RIGHT:"swiperight",SWIPE_UP:"swipeup",SWIPE_DOWN:"swipedown",SWIPE:"swipe",DRAG:"drag",HOLD:"hold",TAP:"tap",DOUBLE_TAP:"doubletap"},_={start:null,move:null,end:null},N=0,A=null,x=null,R=null,b=!1,D=!1,L=!1,W={},H=!1,M=null,U=!1,F=1,k=!1,G=[],B=0,j=0,q=0,K=null,X={_getAngleDiff:function(t){for(var e=parseInt(B-s(t[0],t[1]),10),n=0;Math.abs(e-j)>90&&n++<50;)0>j?e-=180:e+=180;return j=parseInt(e,10)},pinch:function(t){var e=t.target;if(S.pinch){if(!H)return;if(o(t)<2&&!p(t))return;var n=i(_.start,_.move),r=this._getAngleDiff(_.move),a={type:"",originEvent:t,scale:n,rotation:r,direction:r>0?"right":"left",fingersCount:o(t)};if(D?l(t)?a.fingerStatus="move":p(t)&&(a.fingerStatus="end",T(e,O.PINCH_END,a),f()):(D=!0,a.fingerStatus="start",T(e,O.PINCH_START,a)),T(e,O.PINCH,a),Math.abs(1-n)>S.minScaleRate){var s=_utils.deepCopy(a),u=1e-11;n>F?(F=n-u,T(e,O.PINCH_OUT,s,!1)):F>n&&(F=n+u,T(e,O.PINCH_IN,s,!1)),p(t)&&(F=1)}if(Math.abs(r)>S.minRotationAngle){var c,v=_utils.deepCopy(a);c=r>0?O.ROTATION_RIGHT:O.ROTATION_LEFT,T(e,c,v,!1),T(e,O.ROTATION,a)}}},rotateSingleFinger:function(t){var e=t.target;if(k&&o(t)<2){if(!_.move)return;if(G.length<2){var n=c(e);G=[{x:n.left+e.offsetWidth/2,y:n.top+e.offsetHeight/2},_.move[0]],B=parseInt(s(G[0],G[1]),10)}var r=[G[0],_.move[0]],i=this._getAngleDiff(r),a={type:"",originEvent:t,rotation:i,direction:i>0?"right":"left",fingersCount:o(t)};l(t)?a.fingerStatus="move":(p(t)||"mouseout"===t.type)&&(a.fingerStatus="end",T(e,O.PINCH_END,a),f());var u=i>0?O.ROTATION_RIGHT:O.ROTATION_LEFT;T(e,u,a),T(e,O.ROTATION,a)}},swipe:function(t){var e=t.target;if(H&&_.move&&!(o(t)>1)){var n=Date.now(),i=n-N,s=r(_.start[0],_.move[0]),c={x:_.move[0].x-W.left,y:_.move[0].y-W.top},f=a(_.start[0],_.move[0]),v=u(f),h=i/1e3,g=10*(10-S.swipeFactor)*h*h,d={type:O.SWIPE,originEvent:t,position:c,direction:v,distance:s,distanceX:_.move[0].x-_.start[0].x,distanceY:_.move[0].y-_.start[0].y,angle:f,duration:i,fingersCount:o(t),factor:g};if(S.swipe){var m=function(){var t=O;switch(v){case"up":T(e,t.SWIPE_UP,d);break;case"down":T(e,t.SWIPE_DOWN,d);break;case"left":T(e,t.SWIPE_LEFT,d);break;case"right":T(e,t.SWIPE_RIGHT,d)}};b?l(t)?(d.fingerStatus=d.swipe="move",T(e,O.SWIPING,d),i>S.swipeTime&&i<S.swipeTime+50&&s>S.swipeMinDistance&&(m(),T(e,O.SWIPE,d,!1))):(p(t)||"mouseout"===t.type)&&(d.fingerStatus=d.swipe="end",T(e,O.SWIPE_END,d),S.swipeTime>i&&s>S.swipeMinDistance&&(m(),T(e,O.SWIPE,d,!1))):(d.fingerStatus=d.swipe="start",b=!0,T(e,O.SWIPE_START,d))}S.drag&&(L?l(t)?d.fingerStatus=d.swipe="move":p(t)&&(d.fingerStatus=d.swipe="end"):(d.fingerStatus=d.swipe="start",L=!0),T(e,O.DRAG,d))}},tap:function(t){var e=t.target;if(S.tap){var n=Date.now(),i=n-N,a=r(_.start[0],_.move?_.move[0]:_.start[0]);clearTimeout(M);var s=function(){if(K&&S.doubleTap&&N-q<S.maxDoubleTapInterval){var t=r(K,_.start[0]);if(16>t)return!0}return!1}();if(s)return void T(e,O.DOUBLE_TAP,{type:O.DOUBLE_TAP,originEvent:t,position:_.start[0]});if(S.tapMaxDistance<a)return;S.holdTime>i&&o(t)<=1&&(U=!0,q=n,K=_.start[0],T(e,O.TAP,{type:O.TAP,originEvent:t,fingersCount:o(t),position:_.start[0]}),T(e,O.CLICK,{type:O.CLICK,originEvent:t,fingersCount:o(t),position:_.start[0]}))}},hold:function(t){var e=t.target;S.hold&&(clearTimeout(M),M=setTimeout(function(){if(_.start){var n=r(_.start[0],_.move?_.move[0]:_.start[0]);S.tapMaxDistance<n||U||T(e,"hold",{type:"hold",originEvent:t,fingersCount:o(t),position:_.start[0]})}},S.holdTime))}},Y=function(t){var e=t.target;switch(t.type){case"touchstart":case"mousedown":G=[],H=!0,(!_.start||_.start.length<2)&&(_.start=n(t)),o(t)>=2&&(B=parseInt(s(_.start[0],_.start[1]),10)),N=Date.now(),A=t,W={};var r=e.getBoundingClientRect(),i=document.documentElement;W={top:r.top+(window.pageYOffset||i.scrollTop)-(i.clientTop||0),left:r.left+(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0)},X.hold(t);break;case"touchmove":case"mousemove":if(!H||!_.start)return;_.move=n(t),o(t)>=2?X.pinch(t):k?X.rotateSingleFinger(t):X.swipe(t);break;case"touchend":case"touchcancel":case"mouseup":case"mouseout":if(!H)return;R=t,D?X.pinch(t):k?X.rotateSingleFinger(t):b?X.swipe(t):X.tap(t),f(),B=0,j=0,t.touches&&1===t.touches.length&&(H=!0,k=!0)}},Q=function(){function e(t){C||(t=d.getPCevts(t)),u.forEach(function(e){P(e,t,a,i[t])})}function n(t){C||(t=d.getPCevts(t)),u.forEach(function(e){y(e,t,i[t])})}var r,o,i,a,s=arguments;if(s.length<2||s>4)return console.error("unexpected arguments!");var u="string"===d.getType(s[0])?t.querySelectorAll(s[0]):s[0];if(u=u.length?Array.prototype.slice.call(u):[u],3===s.length&&"string"===d.getType(s[1]))return r=s[1].split(" "),o=s[2],void r.forEach(function(t){C||(t=d.getPCevts(t)),u.forEach(function(e){y(e,t,o)})});if(3!==s.length||"object"!==d.getType(s[1]))if(2!==s.length||"object"!==d.getType(s[1])){if(4===s.length&&"object"===d.getType(s[2]))return r=s[1].split(" "),o=s[3],void r.forEach(function(t){C||(t=d.getPCevts(t)),u.forEach(function(e){y(e,t,o)})});if(4===s.length){var c=u[0];return r=s[1].split(" "),a=s[2],o=s[3],void r.forEach(function(t){C||(t=d.getPCevts(t)),P(c,t,a,o)})}}else{i=s[1];for(var f in i)n(f)}else{i=s[1],a=s[2];for(var l in i)e(l)}},V=function(){var e,n=arguments;if(n.length<1||n.length>4)return console.error("unexpected arguments!");var r="string"===d.getType(n[0])?t.querySelectorAll(n[0]):n[0];if(r=r.length?Array.prototype.slice.call(r):[r],1===n.length||2===n.length)return void r.forEach(function(t){e=n[1]?n[1].split(" "):Object.keys(t.listeners),e.length&&e.forEach(function(e){C||(e=d.getPCevts(e)),w(t,e),I(t,e)})});if(3===n.length&&"function"===d.getType(n[2]))return handler=n[2],void r.forEach(function(t){e=n[1].split(" "),e.forEach(function(e){C||(e=d.getPCevts(e)),w(t,e,handler)})});if(3===n.length&&"string"===d.getType(n[2])){var o=n[2];return void r.forEach(function(t){e=n[1].split(" "),e.forEach(function(e){C||(e=d.getPCevts(e)),I(t,e,o)})})}return 4===n.length?(handler=n[3],void r.forEach(function(t){e=n[1].split(" "),e.forEach(function(e){C||(e=d.getPCevts(e)),I(t,e,o,handler)})})):void 0},z=function(e,n){var r=arguments;C||(n=d.getPCevts(n));var o="string"===d.getType(r[0])?t.querySelectorAll(r[0]):r[0];o=o.length?Array.prototype.call(o):[o],o.forEach(function(t){T(t,n)})};v(),e.on=Q,e.off=V,e.bind=Q,e.unbind=V,e.live=Q,e.die=V,e.config=S,e.trigger=z}(document,touch);